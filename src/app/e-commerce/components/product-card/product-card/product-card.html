<div class="product-card" [class.out-of-stock]="product.stock === 0">
  <div class="product-image">
    <img [src]="product.image" [alt]="product.name" loading="lazy">
    <div *ngIf="product.stock === 0" class="out-of-stock-badge">Out of Stock</div>
  </div>
  <div class="product-details">
    <h3 class="product-name">{{ product.name }}</h3>
    <p class="product-price">${{ product.price.toFixed(2) }}</p>
    <p class="product-description" *ngIf="product.description">{{ product.description }}</p>
    
    <!-- Projected content from parent -->
    <ng-content select="[productActions]"></ng-content>
    
    <!-- Container for dynamic reviews component -->
     
    <div #reviewsContainer class="reviews-container"></div>
    
    <div class="product-actions">
      <button 
        class="add-to-cart" 
        (click)="onAddToCart()"
        [disabled]="product.stock === 0">
        <span *ngIf="product.stock > 0; else outOfStock">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="9" cy="21" r="1"></circle>
            <circle cx="20" cy="21" r="1"></circle>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
          </svg>
          Add to Cart
        </span>
        <ng-template #outOfStock>Out of Stock</ng-template>
      </button>
      
      <!-- Toggle reviews button -->
      <button 
        class="toggle-reviews" 
        (click)="loadReviews()"
        [disabled]="!reviewsContainer">
        {{ showReviews ? 'Hide Reviews' : 'Show Reviews' }}
      </button>
    </div>
  </div>
</div>